buildscript {
  repositories {
    mavenLocal()
    maven { url "http://10.16.8.81:8081/artifactory/foundry-maven" }
    maven { url "https://plugins.gradle.org/m2/" }
  }

  dependencies {
    classpath name: 'foundrypython', version: '0.0.+', group: 'tech.roundfoundry.gradle'
  }
}

apply plugin: 'tech.roundfoundry.gradle.foundrypython'

   /* ---------- PROJECT SPECIFIC STUFF UNDER HERE ---------- */

group = 'tech.roundfoundry'

python {
 virtualenv ".python"
 app "servercheck"
 entrypoint "main.py"
}

task all {
  dependsOn rfStaticAnalysis
  dependsOn rfUnitTest
  dependsOn rfAcceptanceTest
}

pythonNose {
  pythonlibs {
    require 'psutil'
    require 'testfixtures'
  }
}

ospackage {
    require('python2-psutil')

    into '/usr/share/python2.7/site_packages/servercheck'
    from ('build/servercheck') {
      exclude 'scripts/rpm'
      exclude '**/*.pyc'
    }
}
